{"version":3,"sources":["../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/remoteProvider/httpRequest.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/remoteProvider/ImdsCredentials.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/remoteProvider/RemoteProviderInit.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/remoteProvider/retry.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/fromContainerMetadata.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/error/InstanceMetadataV1FallbackError.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/config/Endpoint.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/config/EndpointConfigOptions.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/config/EndpointMode.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/config/EndpointModeConfigOptions.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/utils/getInstanceMetadataEndpoint.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/utils/getExtendedInstanceMetadataCredentials.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/utils/staticStabilityProvider.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/fromInstanceMetadata.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/types.js","../../../node_modules/.pnpm/@smithy+credential-provider-imds@3.1.1/node_modules/@smithy/credential-provider-imds/dist-es/index.js"],"sourcesContent":["import { ProviderError } from \"@smithy/property-provider\";\nimport { Buffer } from \"buffer\";\nimport { request } from \"http\";\nexport function httpRequest(options) {\n    return new Promise((resolve, reject) => {\n        const req = request({\n            method: \"GET\",\n            ...options,\n            hostname: options.hostname?.replace(/^\\[(.+)\\]$/, \"$1\"),\n        });\n        req.on(\"error\", (err) => {\n            reject(Object.assign(new ProviderError(\"Unable to connect to instance metadata service\"), err));\n            req.destroy();\n        });\n        req.on(\"timeout\", () => {\n            reject(new ProviderError(\"TimeoutError from instance metadata service\"));\n            req.destroy();\n        });\n        req.on(\"response\", (res) => {\n            const { statusCode = 400 } = res;\n            if (statusCode < 200 || 300 <= statusCode) {\n                reject(Object.assign(new ProviderError(\"Error response received from instance metadata service\"), { statusCode }));\n                req.destroy();\n            }\n            const chunks = [];\n            res.on(\"data\", (chunk) => {\n                chunks.push(chunk);\n            });\n            res.on(\"end\", () => {\n                resolve(Buffer.concat(chunks));\n                req.destroy();\n            });\n        });\n        req.end();\n    });\n}\n","export const isImdsCredentials = (arg) => Boolean(arg) &&\n    typeof arg === \"object\" &&\n    typeof arg.AccessKeyId === \"string\" &&\n    typeof arg.SecretAccessKey === \"string\" &&\n    typeof arg.Token === \"string\" &&\n    typeof arg.Expiration === \"string\";\nexport const fromImdsCredentials = (creds) => ({\n    accessKeyId: creds.AccessKeyId,\n    secretAccessKey: creds.SecretAccessKey,\n    sessionToken: creds.Token,\n    expiration: new Date(creds.Expiration),\n});\n","export const DEFAULT_TIMEOUT = 1000;\nexport const DEFAULT_MAX_RETRIES = 0;\nexport const providerConfigFromInit = ({ maxRetries = DEFAULT_MAX_RETRIES, timeout = DEFAULT_TIMEOUT, }) => ({ maxRetries, timeout });\n","export const retry = (toRetry, maxRetries) => {\n    let promise = toRetry();\n    for (let i = 0; i < maxRetries; i++) {\n        promise = promise.catch(toRetry);\n    }\n    return promise;\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { parse } from \"url\";\nimport { httpRequest } from \"./remoteProvider/httpRequest\";\nimport { fromImdsCredentials, isImdsCredentials } from \"./remoteProvider/ImdsCredentials\";\nimport { providerConfigFromInit } from \"./remoteProvider/RemoteProviderInit\";\nimport { retry } from \"./remoteProvider/retry\";\nexport const ENV_CMDS_FULL_URI = \"AWS_CONTAINER_CREDENTIALS_FULL_URI\";\nexport const ENV_CMDS_RELATIVE_URI = \"AWS_CONTAINER_CREDENTIALS_RELATIVE_URI\";\nexport const ENV_CMDS_AUTH_TOKEN = \"AWS_CONTAINER_AUTHORIZATION_TOKEN\";\nexport const fromContainerMetadata = (init = {}) => {\n    const { timeout, maxRetries } = providerConfigFromInit(init);\n    return () => retry(async () => {\n        const requestOptions = await getCmdsUri({ logger: init.logger });\n        const credsResponse = JSON.parse(await requestFromEcsImds(timeout, requestOptions));\n        if (!isImdsCredentials(credsResponse)) {\n            throw new CredentialsProviderError(\"Invalid response received from instance metadata service.\", {\n                logger: init.logger,\n            });\n        }\n        return fromImdsCredentials(credsResponse);\n    }, maxRetries);\n};\nconst requestFromEcsImds = async (timeout, options) => {\n    if (process.env[ENV_CMDS_AUTH_TOKEN]) {\n        options.headers = {\n            ...options.headers,\n            Authorization: process.env[ENV_CMDS_AUTH_TOKEN],\n        };\n    }\n    const buffer = await httpRequest({\n        ...options,\n        timeout,\n    });\n    return buffer.toString();\n};\nconst CMDS_IP = \"169.254.170.2\";\nconst GREENGRASS_HOSTS = {\n    localhost: true,\n    \"127.0.0.1\": true,\n};\nconst GREENGRASS_PROTOCOLS = {\n    \"http:\": true,\n    \"https:\": true,\n};\nconst getCmdsUri = async ({ logger }) => {\n    if (process.env[ENV_CMDS_RELATIVE_URI]) {\n        return {\n            hostname: CMDS_IP,\n            path: process.env[ENV_CMDS_RELATIVE_URI],\n        };\n    }\n    if (process.env[ENV_CMDS_FULL_URI]) {\n        const parsed = parse(process.env[ENV_CMDS_FULL_URI]);\n        if (!parsed.hostname || !(parsed.hostname in GREENGRASS_HOSTS)) {\n            throw new CredentialsProviderError(`${parsed.hostname} is not a valid container metadata service hostname`, {\n                tryNextLink: false,\n                logger,\n            });\n        }\n        if (!parsed.protocol || !(parsed.protocol in GREENGRASS_PROTOCOLS)) {\n            throw new CredentialsProviderError(`${parsed.protocol} is not a valid container metadata service protocol`, {\n                tryNextLink: false,\n                logger,\n            });\n        }\n        return {\n            ...parsed,\n            port: parsed.port ? parseInt(parsed.port, 10) : undefined,\n        };\n    }\n    throw new CredentialsProviderError(\"The container metadata credential provider cannot be used unless\" +\n        ` the ${ENV_CMDS_RELATIVE_URI} or ${ENV_CMDS_FULL_URI} environment` +\n        \" variable is set\", {\n        tryNextLink: false,\n        logger,\n    });\n};\n","import { CredentialsProviderError } from \"@smithy/property-provider\";\nexport class InstanceMetadataV1FallbackError extends CredentialsProviderError {\n    constructor(message, tryNextLink = true) {\n        super(message, tryNextLink);\n        this.tryNextLink = tryNextLink;\n        this.name = \"InstanceMetadataV1FallbackError\";\n        Object.setPrototypeOf(this, InstanceMetadataV1FallbackError.prototype);\n    }\n}\n","export var Endpoint;\n(function (Endpoint) {\n    Endpoint[\"IPv4\"] = \"http://169.254.169.254\";\n    Endpoint[\"IPv6\"] = \"http://[fd00:ec2::254]\";\n})(Endpoint || (Endpoint = {}));\n","export const ENV_ENDPOINT_NAME = \"AWS_EC2_METADATA_SERVICE_ENDPOINT\";\nexport const CONFIG_ENDPOINT_NAME = \"ec2_metadata_service_endpoint\";\nexport const ENDPOINT_CONFIG_OPTIONS = {\n    environmentVariableSelector: (env) => env[ENV_ENDPOINT_NAME],\n    configFileSelector: (profile) => profile[CONFIG_ENDPOINT_NAME],\n    default: undefined,\n};\n","export var EndpointMode;\n(function (EndpointMode) {\n    EndpointMode[\"IPv4\"] = \"IPv4\";\n    EndpointMode[\"IPv6\"] = \"IPv6\";\n})(EndpointMode || (EndpointMode = {}));\n","import { EndpointMode } from \"./EndpointMode\";\nexport const ENV_ENDPOINT_MODE_NAME = \"AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE\";\nexport const CONFIG_ENDPOINT_MODE_NAME = \"ec2_metadata_service_endpoint_mode\";\nexport const ENDPOINT_MODE_CONFIG_OPTIONS = {\n    environmentVariableSelector: (env) => env[ENV_ENDPOINT_MODE_NAME],\n    configFileSelector: (profile) => profile[CONFIG_ENDPOINT_MODE_NAME],\n    default: EndpointMode.IPv4,\n};\n","import { loadConfig } from \"@smithy/node-config-provider\";\nimport { parseUrl } from \"@smithy/url-parser\";\nimport { Endpoint as InstanceMetadataEndpoint } from \"../config/Endpoint\";\nimport { ENDPOINT_CONFIG_OPTIONS } from \"../config/EndpointConfigOptions\";\nimport { EndpointMode } from \"../config/EndpointMode\";\nimport { ENDPOINT_MODE_CONFIG_OPTIONS, } from \"../config/EndpointModeConfigOptions\";\nexport const getInstanceMetadataEndpoint = async () => parseUrl((await getFromEndpointConfig()) || (await getFromEndpointModeConfig()));\nconst getFromEndpointConfig = async () => loadConfig(ENDPOINT_CONFIG_OPTIONS)();\nconst getFromEndpointModeConfig = async () => {\n    const endpointMode = await loadConfig(ENDPOINT_MODE_CONFIG_OPTIONS)();\n    switch (endpointMode) {\n        case EndpointMode.IPv4:\n            return InstanceMetadataEndpoint.IPv4;\n        case EndpointMode.IPv6:\n            return InstanceMetadataEndpoint.IPv6;\n        default:\n            throw new Error(`Unsupported endpoint mode: ${endpointMode}.` + ` Select from ${Object.values(EndpointMode)}`);\n    }\n};\n","const STATIC_STABILITY_REFRESH_INTERVAL_SECONDS = 5 * 60;\nconst STATIC_STABILITY_REFRESH_INTERVAL_JITTER_WINDOW_SECONDS = 5 * 60;\nconst STATIC_STABILITY_DOC_URL = \"https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html\";\nexport const getExtendedInstanceMetadataCredentials = (credentials, logger) => {\n    const refreshInterval = STATIC_STABILITY_REFRESH_INTERVAL_SECONDS +\n        Math.floor(Math.random() * STATIC_STABILITY_REFRESH_INTERVAL_JITTER_WINDOW_SECONDS);\n    const newExpiration = new Date(Date.now() + refreshInterval * 1000);\n    logger.warn(\"Attempting credential expiration extension due to a credential service availability issue. A refresh of these \" +\n        `credentials will be attempted after ${new Date(newExpiration)}.\\nFor more information, please visit: ` +\n        STATIC_STABILITY_DOC_URL);\n    const originalExpiration = credentials.originalExpiration ?? credentials.expiration;\n    return {\n        ...credentials,\n        ...(originalExpiration ? { originalExpiration } : {}),\n        expiration: newExpiration,\n    };\n};\n","import { getExtendedInstanceMetadataCredentials } from \"./getExtendedInstanceMetadataCredentials\";\nexport const staticStabilityProvider = (provider, options = {}) => {\n    const logger = options?.logger || console;\n    let pastCredentials;\n    return async () => {\n        let credentials;\n        try {\n            credentials = await provider();\n            if (credentials.expiration && credentials.expiration.getTime() < Date.now()) {\n                credentials = getExtendedInstanceMetadataCredentials(credentials, logger);\n            }\n        }\n        catch (e) {\n            if (pastCredentials) {\n                logger.warn(\"Credential renew failed: \", e);\n                credentials = getExtendedInstanceMetadataCredentials(pastCredentials, logger);\n            }\n            else {\n                throw e;\n            }\n        }\n        pastCredentials = credentials;\n        return credentials;\n    };\n};\n","import { loadConfig } from \"@smithy/node-config-provider\";\nimport { CredentialsProviderError } from \"@smithy/property-provider\";\nimport { InstanceMetadataV1FallbackError } from \"./error/InstanceMetadataV1FallbackError\";\nimport { httpRequest } from \"./remoteProvider/httpRequest\";\nimport { fromImdsCredentials, isImdsCredentials } from \"./remoteProvider/ImdsCredentials\";\nimport { providerConfigFromInit } from \"./remoteProvider/RemoteProviderInit\";\nimport { retry } from \"./remoteProvider/retry\";\nimport { getInstanceMetadataEndpoint } from \"./utils/getInstanceMetadataEndpoint\";\nimport { staticStabilityProvider } from \"./utils/staticStabilityProvider\";\nconst IMDS_PATH = \"/latest/meta-data/iam/security-credentials/\";\nconst IMDS_TOKEN_PATH = \"/latest/api/token\";\nconst AWS_EC2_METADATA_V1_DISABLED = \"AWS_EC2_METADATA_V1_DISABLED\";\nconst PROFILE_AWS_EC2_METADATA_V1_DISABLED = \"ec2_metadata_v1_disabled\";\nconst X_AWS_EC2_METADATA_TOKEN = \"x-aws-ec2-metadata-token\";\nexport const fromInstanceMetadata = (init = {}) => staticStabilityProvider(getInstanceMetadataProvider(init), { logger: init.logger });\nconst getInstanceMetadataProvider = (init = {}) => {\n    let disableFetchToken = false;\n    const { logger, profile } = init;\n    const { timeout, maxRetries } = providerConfigFromInit(init);\n    const getCredentials = async (maxRetries, options) => {\n        const isImdsV1Fallback = disableFetchToken || options.headers?.[X_AWS_EC2_METADATA_TOKEN] == null;\n        if (isImdsV1Fallback) {\n            let fallbackBlockedFromProfile = false;\n            let fallbackBlockedFromProcessEnv = false;\n            const configValue = await loadConfig({\n                environmentVariableSelector: (env) => {\n                    const envValue = env[AWS_EC2_METADATA_V1_DISABLED];\n                    fallbackBlockedFromProcessEnv = !!envValue && envValue !== \"false\";\n                    if (envValue === undefined) {\n                        throw new CredentialsProviderError(`${AWS_EC2_METADATA_V1_DISABLED} not set in env, checking config file next.`, { logger: init.logger });\n                    }\n                    return fallbackBlockedFromProcessEnv;\n                },\n                configFileSelector: (profile) => {\n                    const profileValue = profile[PROFILE_AWS_EC2_METADATA_V1_DISABLED];\n                    fallbackBlockedFromProfile = !!profileValue && profileValue !== \"false\";\n                    return fallbackBlockedFromProfile;\n                },\n                default: false,\n            }, {\n                profile,\n            })();\n            if (init.ec2MetadataV1Disabled || configValue) {\n                const causes = [];\n                if (init.ec2MetadataV1Disabled)\n                    causes.push(\"credential provider initialization (runtime option ec2MetadataV1Disabled)\");\n                if (fallbackBlockedFromProfile)\n                    causes.push(`config file profile (${PROFILE_AWS_EC2_METADATA_V1_DISABLED})`);\n                if (fallbackBlockedFromProcessEnv)\n                    causes.push(`process environment variable (${AWS_EC2_METADATA_V1_DISABLED})`);\n                throw new InstanceMetadataV1FallbackError(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${causes.join(\", \")}].`);\n            }\n        }\n        const imdsProfile = (await retry(async () => {\n            let profile;\n            try {\n                profile = await getProfile(options);\n            }\n            catch (err) {\n                if (err.statusCode === 401) {\n                    disableFetchToken = false;\n                }\n                throw err;\n            }\n            return profile;\n        }, maxRetries)).trim();\n        return retry(async () => {\n            let creds;\n            try {\n                creds = await getCredentialsFromProfile(imdsProfile, options, init);\n            }\n            catch (err) {\n                if (err.statusCode === 401) {\n                    disableFetchToken = false;\n                }\n                throw err;\n            }\n            return creds;\n        }, maxRetries);\n    };\n    return async () => {\n        const endpoint = await getInstanceMetadataEndpoint();\n        if (disableFetchToken) {\n            logger?.debug(\"AWS SDK Instance Metadata\", \"using v1 fallback (no token fetch)\");\n            return getCredentials(maxRetries, { ...endpoint, timeout });\n        }\n        else {\n            let token;\n            try {\n                token = (await getMetadataToken({ ...endpoint, timeout })).toString();\n            }\n            catch (error) {\n                if (error?.statusCode === 400) {\n                    throw Object.assign(error, {\n                        message: \"EC2 Metadata token request returned error\",\n                    });\n                }\n                else if (error.message === \"TimeoutError\" || [403, 404, 405].includes(error.statusCode)) {\n                    disableFetchToken = true;\n                }\n                logger?.debug(\"AWS SDK Instance Metadata\", \"using v1 fallback (initial)\");\n                return getCredentials(maxRetries, { ...endpoint, timeout });\n            }\n            return getCredentials(maxRetries, {\n                ...endpoint,\n                headers: {\n                    [X_AWS_EC2_METADATA_TOKEN]: token,\n                },\n                timeout,\n            });\n        }\n    };\n};\nconst getMetadataToken = async (options) => httpRequest({\n    ...options,\n    path: IMDS_TOKEN_PATH,\n    method: \"PUT\",\n    headers: {\n        \"x-aws-ec2-metadata-token-ttl-seconds\": \"21600\",\n    },\n});\nconst getProfile = async (options) => (await httpRequest({ ...options, path: IMDS_PATH })).toString();\nconst getCredentialsFromProfile = async (profile, options, init) => {\n    const credentialsResponse = JSON.parse((await httpRequest({\n        ...options,\n        path: IMDS_PATH + profile,\n    })).toString());\n    if (!isImdsCredentials(credentialsResponse)) {\n        throw new CredentialsProviderError(\"Invalid response received from instance metadata service.\", {\n            logger: init.logger,\n        });\n    }\n    return fromImdsCredentials(credentialsResponse);\n};\n","export {};\n","export * from \"./fromContainerMetadata\";\nexport * from \"./fromInstanceMetadata\";\nexport * from \"./remoteProvider/RemoteProviderInit\";\nexport * from \"./types\";\nexport { httpRequest } from \"./remoteProvider/httpRequest\";\nexport { getInstanceMetadataEndpoint } from \"./utils/getInstanceMetadataEndpoint\";\nexport { Endpoint } from \"./config/Endpoint\";\n"],"mappings":"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","names":["Endpoint","EndpointMode","init_dist_es","init_dist_es","maxRetries","profile","init_dist_es"]}